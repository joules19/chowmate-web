"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{80857:function(e,t,s){s.d(t,{Z:function(){return E}});var r=s(57437),i=s(2265);let n=i.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?i.createElement("title",{id:r},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))});var o=s(42548),E=e=>{let{label:t,placeholder:s,id:E,name:a,type:R="text",value:c,onChange:l,onBlur:u,required:_=!1,readOnly:S=!1,error:D="",heightMobile:I="53px",heightSm:d="42px",heightMd:h="53px"}=e,[m,T]=(0,i.useState)(!1),[N,p]=(0,i.useState)(""),[O,A]=(0,i.useState)(""),[P,g]=(0,i.useState)("");return(0,i.useEffect)(()=>{p("h-[".concat(I,"]")),A("sm:h-[".concat(d,"]")),g("md:h-[".concat(h,"]"))},[I,d,h]),(0,r.jsxs)("div",{className:"mb-4 relative",children:[(0,r.jsx)("label",{htmlFor:E,className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{placeholder:s,type:"password"!==R||m?"password"===R?"text":R:"password",id:E,name:a,value:c,onChange:l,onBlur:u,required:_,readOnly:S,className:"mt-1 block w-full ".concat(N," ").concat(O," ").concat(P," ").concat("password"===R?"pr-10":"pr-3"," pl-3 py-2 border-[.8px] ").concat(D?"border-red-500":"border-gray-300"," shadow-sm focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:border-primary-500 sm:text-sm rounded-md focus:outline-none")}),"password"===R&&(0,r.jsx)("button",{type:"button",onClick:()=>T(!m),className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer mt-1","aria-label":m?"Hide password":"Show password",children:m?(0,r.jsx)(n,{className:"w-5 h-5 text-gray-500 hover:text-gray-700"}):(0,r.jsx)(o.Z,{className:"w-5 h-5 text-gray-500 hover:text-gray-700"})})]}),D&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-500",children:D})]})}},8226:function(e,t,s){var r,i,n,o;s.d(t,{MN:function(){return E},uU:function(){return r},y3:function(){return i}}),(n=r||(r={})).SUPER_ADMIN="SuperAdmin",n.ADMIN="Admin",n.MODERATOR="Moderator",n.SUPPORT="Support",(o=i||(i={})).VIEW_DASHBOARD="VIEW_DASHBOARD",o.VIEW_USERS="VIEW_USERS",o.CREATE_USER="CREATE_USER",o.EDIT_USER="EDIT_USER",o.DELETE_USER="DELETE_USER",o.SUSPEND_USER="SUSPEND_USER",o.VIEW_VENDORS="VIEW_VENDORS",o.APPROVE_VENDOR="APPROVE_VENDOR",o.REJECT_VENDOR="REJECT_VENDOR",o.SUSPEND_VENDOR="SUSPEND_VENDOR",o.EDIT_VENDOR="EDIT_VENDOR",o.DELETE_VENDOR="DELETE_VENDOR",o.VIEW_RIDERS="VIEW_RIDERS",o.APPROVE_RIDER="APPROVE_RIDER",o.REJECT_RIDER="REJECT_RIDER",o.SUSPEND_RIDER="SUSPEND_RIDER",o.EDIT_RIDER="EDIT_RIDER",o.DELETE_RIDER="DELETE_RIDER",o.TRACK_RIDER="TRACK_RIDER",o.VIEW_ORDERS="VIEW_ORDERS",o.EDIT_ORDER="EDIT_ORDER",o.CANCEL_ORDER="CANCEL_ORDER",o.REFUND_ORDER="REFUND_ORDER",o.ASSIGN_RIDER="ASSIGN_RIDER",o.VIEW_ANALYTICS="VIEW_ANALYTICS",o.EXPORT_REPORTS="EXPORT_REPORTS",o.VIEW_SETTINGS="VIEW_SETTINGS",o.EDIT_SETTINGS="EDIT_SETTINGS",o.MANAGE_PERMISSIONS="MANAGE_PERMISSIONS",o.VIEW_AUDIT_LOGS="VIEW_AUDIT_LOGS",o.MANAGE_SYSTEM="MANAGE_SYSTEM";let E={SuperAdmin:Object.values(i),Admin:["VIEW_DASHBOARD","VIEW_USERS","CREATE_USER","EDIT_USER","SUSPEND_USER","VIEW_VENDORS","APPROVE_VENDOR","REJECT_VENDOR","SUSPEND_VENDOR","EDIT_VENDOR","VIEW_RIDERS","APPROVE_RIDER","REJECT_RIDER","SUSPEND_RIDER","EDIT_RIDER","TRACK_RIDER","VIEW_ORDERS","EDIT_ORDER","CANCEL_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS","EXPORT_REPORTS","VIEW_SETTINGS","VIEW_AUDIT_LOGS"],Moderator:["VIEW_DASHBOARD","VIEW_USERS","VIEW_VENDORS","APPROVE_VENDOR","REJECT_VENDOR","VIEW_RIDERS","APPROVE_RIDER","REJECT_RIDER","VIEW_ORDERS","EDIT_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS"],Support:["VIEW_DASHBOARD","VIEW_USERS","VIEW_VENDORS","VIEW_RIDERS","VIEW_ORDERS","EDIT_ORDER"]}},51034:function(e,t,s){s.d(t,{Nv:function(){return E}});var r=s(83464),i=s(24294);let n=r.Z.create({baseURL:"http://localhost:8080",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});n.interceptors.request.use(e=>{let t=i.e.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),n.interceptors.response.use(e=>e,async e=>{var t,s,r;let o=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){if(!(null==o?void 0:o._retry)){o&&(o._retry=!0);try{if(await i.e.refreshToken()&&o){let e=i.e.getToken();if(e)return o.headers.Authorization="Bearer ".concat(e),n(o)}}catch(e){console.error("Token refresh failed:",e)}}i.e.logout();{let e=window.location.pathname;e.includes("/login")||(window.location.href="/login?redirect=".concat(encodeURIComponent(e)))}}return(null===(s=e.response)||void 0===s?void 0:s.status)===403&&console.error("Access forbidden - insufficient permissions"),(null===(r=e.response)||void 0===r?void 0:r.status)&&e.response.status>=500&&console.error("Server error - please try again later"),Promise.reject(e)}),t.ZP=n;let o=e=>{let{data:t}=e;if("success"in t){if(!t.success)throw Error(t.message||"API request failed");return t.data}if(200!==t.statusCode)throw Error(t.message||"API request failed");let s=t.data;return s&&"object"==typeof s&&"items"in s?{items:s.items,pageNumber:s.pageNumber,pageSize:s.pageSize,totalCount:s.totalCount}:s},E=async e=>{try{let t=await e();return o(t)}catch(e){if(r.Z.isAxiosError(e)){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||e.message)}throw e}}},24294:function(e,t,s){s.d(t,{e:function(){return o}});var r=s(19157),i=s(8226),n=s(51034);class o{static async login(e,t){try{let s=(await n.ZP.post("/api/account/auth/admin-signin",{email:e,password:t})).data.data;if(console.log("Login response:",s),!s.accessToken||!s.user)throw Error("Invalid login response - missing required data");return this.setToken(s.accessToken),this.setRefreshToken(s.refreshToken||""),this.setTokenExpiry(s.expiration||""),this.setUser(s.user),r.$.setUserPermissions({role:s.user.roles[0],permissions:s.user.permissions}),s}catch(e){throw console.error("Login error:",e),e}}static logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.TOKEN_EXPIRY_KEY),r.$.clearPermissions()}static getToken(){return localStorage.getItem(this.TOKEN_KEY)}static setToken(e){localStorage.setItem(this.TOKEN_KEY,e)}static getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}static setRefreshToken(e){localStorage.setItem(this.REFRESH_TOKEN_KEY,e)}static getTokenExpiry(){return localStorage.getItem(this.TOKEN_EXPIRY_KEY)}static setTokenExpiry(e){localStorage.setItem(this.TOKEN_EXPIRY_KEY,e)}static isTokenExpired(){let e=this.getTokenExpiry();return!e||new Date(e)<=new Date}static getUser(){{let e=localStorage.getItem(this.USER_KEY);return e?JSON.parse(e):null}}static setUser(e){localStorage.setItem(this.USER_KEY,JSON.stringify(e))}static isAuthenticated(){return!!this.getToken()}static async refreshToken(){let e=this.getRefreshToken();if(!e)return!1;try{let t=(await n.ZP.post("/api/auth/refresh",{refreshToken:e})).data.data;if(t.accessToken)return this.setToken(t.accessToken),this.setRefreshToken(t.refreshToken||""),this.setTokenExpiry(t.expiration||""),!0;return!1}catch(e){return console.error("Token refresh failed:",e),this.logout(),!1}}static async validateToken(){if(!this.getToken())return!1;try{return(await n.ZP.post("/api/auth/validate")).data.data.valid}catch(e){return console.error("Token validation failed:",e),!1}}static async initializeAuth(){let e=this.getToken(),t=this.getUser();return e&&t?(r.$.setUserPermissions({role:t.roles[0],permissions:t.permissions}),t):null}static hasAdminAccess(){let e=this.getUser();return!!e&&e.roles.some(e=>[i.uU.SUPER_ADMIN,i.uU.ADMIN,i.uU.MODERATOR].includes(e))}}o.TOKEN_KEY="authToken",o.REFRESH_TOKEN_KEY="refreshToken",o.USER_KEY="authUser",o.TOKEN_EXPIRY_KEY="tokenExpiry"},19157:function(e,t,s){s.d(t,{$:function(){return i}});var r=s(8226);class i{static setUserPermissions(e){this.userPermissions=e}static getUserPermissions(){return this.userPermissions}static hasPermission(e){return!!this.userPermissions&&this.userPermissions.permissions.includes(e)}static hasRole(e){return!!this.userPermissions&&this.userPermissions.role===e}static hasAnyRole(e){return!!this.userPermissions&&e.includes(this.userPermissions.role)}static hasAnyPermission(e){return!!this.userPermissions&&e.some(e=>this.userPermissions.permissions.includes(e))}static canAccess(e){return!!this.userPermissions&&(Array.isArray(e)?e:[e]).every(e=>this.userPermissions.permissions.includes(e))}static getPermissionsForRole(e){return r.MN[e]||[]}static isAdmin(){return this.hasAnyRole([r.uU.SUPER_ADMIN,r.uU.ADMIN])}static isSuperAdmin(){return this.hasRole(r.uU.SUPER_ADMIN)}static canManageUsers(){return this.hasAnyPermission([r.y3.CREATE_USER,r.y3.EDIT_USER,r.y3.DELETE_USER,r.y3.SUSPEND_USER])}static canManageVendors(){return this.hasAnyPermission([r.y3.APPROVE_VENDOR,r.y3.REJECT_VENDOR,r.y3.SUSPEND_VENDOR,r.y3.EDIT_VENDOR,r.y3.DELETE_VENDOR])}static canManageRiders(){return this.hasAnyPermission([r.y3.APPROVE_RIDER,r.y3.REJECT_RIDER,r.y3.SUSPEND_RIDER,r.y3.EDIT_RIDER,r.y3.DELETE_RIDER])}static canManageOrders(){return this.hasAnyPermission([r.y3.EDIT_ORDER,r.y3.CANCEL_ORDER,r.y3.REFUND_ORDER,r.y3.ASSIGN_RIDER])}static clearPermissions(){this.userPermissions=null}}i.userPermissions=null},42548:function(e,t,s){var r=s(2265);let i=r.forwardRef(function(e,t){let{title:s,titleId:i,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},n),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=i},68690:function(e,t,s){var r=s(2265);let i=r.forwardRef(function(e,t){let{title:s,titleId:i,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},n),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});t.Z=i}}]);