"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8226:function(E,e,s){var R,t,r,i;s.d(e,{MN:function(){return _},uU:function(){return R},y3:function(){return t}}),(r=R||(R={})).SUPER_ADMIN="SuperAdmin",r.ADMIN="Admin",r.MODERATOR="Moderator",r.SUPPORT="Support",r.RIDER_ADMIN="RiderAdmin",r.OPERATIONS_ADMIN="OperationsAdmin",(i=t||(t={})).VIEW_DASHBOARD="VIEW_DASHBOARD",i.VIEW_USERS="VIEW_USERS",i.CREATE_USER="CREATE_USER",i.EDIT_USER="EDIT_USER",i.DELETE_USER="DELETE_USER",i.SUSPEND_USER="SUSPEND_USER",i.VIEW_VENDORS="VIEW_VENDORS",i.APPROVE_VENDOR="APPROVE_VENDOR",i.REJECT_VENDOR="REJECT_VENDOR",i.SUSPEND_VENDOR="SUSPEND_VENDOR",i.EDIT_VENDOR="EDIT_VENDOR",i.DELETE_VENDOR="DELETE_VENDOR",i.VIEW_RIDERS="VIEW_RIDERS",i.APPROVE_RIDER="APPROVE_RIDER",i.REJECT_RIDER="REJECT_RIDER",i.SUSPEND_RIDER="SUSPEND_RIDER",i.EDIT_RIDER="EDIT_RIDER",i.DELETE_RIDER="DELETE_RIDER",i.TRACK_RIDER="TRACK_RIDER",i.VIEW_ORDERS="VIEW_ORDERS",i.EDIT_ORDER="EDIT_ORDER",i.CANCEL_ORDER="CANCEL_ORDER",i.REFUND_ORDER="REFUND_ORDER",i.ASSIGN_RIDER="ASSIGN_RIDER",i.VIEW_ANALYTICS="VIEW_ANALYTICS",i.EXPORT_REPORTS="EXPORT_REPORTS",i.VIEW_SETTINGS="VIEW_SETTINGS",i.EDIT_SETTINGS="EDIT_SETTINGS",i.MANAGE_PERMISSIONS="MANAGE_PERMISSIONS",i.VIEW_ADVERTISEMENTS="VIEW_ADVERTISEMENTS",i.CREATE_ADVERTISEMENT="CREATE_ADVERTISEMENT",i.EDIT_ADVERTISEMENT="EDIT_ADVERTISEMENT",i.DELETE_ADVERTISEMENT="DELETE_ADVERTISEMENT",i.TOGGLE_ADVERTISEMENT="TOGGLE_ADVERTISEMENT",i.VIEW_FEATURE_REQUESTS="VIEW_FEATURE_REQUESTS",i.CREATE_FEATURE_REQUEST="CREATE_FEATURE_REQUEST",i.MANAGE_FEATURE_REQUESTS="MANAGE_FEATURE_REQUESTS",i.REVIEW_FEATURE_REQUESTS="REVIEW_FEATURE_REQUESTS",i.VIEW_PROMOTIONS="VIEW_PROMOTIONS",i.CREATE_PROMOTION="CREATE_PROMOTION",i.EDIT_PROMOTION="EDIT_PROMOTION",i.DELETE_PROMOTION="DELETE_PROMOTION",i.TOGGLE_PROMOTION="TOGGLE_PROMOTION",i.BULK_MANAGE_PROMOTIONS="BULK_MANAGE_PROMOTIONS",i.VIEW_PAYMENTS="VIEW_PAYMENTS",i.MANAGE_PAYMENTS="MANAGE_PAYMENTS",i.FUND_WALLET="FUND_WALLET",i.VIEW_WALLET_TRANSACTIONS="VIEW_WALLET_TRANSACTIONS",i.PROCESS_REFUNDS="PROCESS_REFUNDS",i.VIEW_PAYMENT_ANALYTICS="VIEW_PAYMENT_ANALYTICS",i.VIEW_AUDIT_LOGS="VIEW_AUDIT_LOGS",i.MANAGE_SYSTEM="MANAGE_SYSTEM";let _={SuperAdmin:Object.values(t),Admin:["VIEW_DASHBOARD","VIEW_USERS","CREATE_USER","EDIT_USER","SUSPEND_USER","VIEW_VENDORS","APPROVE_VENDOR","REJECT_VENDOR","SUSPEND_VENDOR","EDIT_VENDOR","VIEW_RIDERS","APPROVE_RIDER","REJECT_RIDER","SUSPEND_RIDER","EDIT_RIDER","TRACK_RIDER","VIEW_ORDERS","EDIT_ORDER","CANCEL_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS","EXPORT_REPORTS","VIEW_SETTINGS","VIEW_AUDIT_LOGS","VIEW_FEATURE_REQUESTS","MANAGE_FEATURE_REQUESTS","REVIEW_FEATURE_REQUESTS","VIEW_PROMOTIONS","CREATE_PROMOTION","EDIT_PROMOTION","DELETE_PROMOTION","TOGGLE_PROMOTION","BULK_MANAGE_PROMOTIONS","VIEW_PAYMENTS","MANAGE_PAYMENTS","FUND_WALLET","VIEW_WALLET_TRANSACTIONS","PROCESS_REFUNDS","VIEW_PAYMENT_ANALYTICS"],Moderator:["VIEW_DASHBOARD","VIEW_USERS","VIEW_VENDORS","APPROVE_VENDOR","REJECT_VENDOR","VIEW_RIDERS","APPROVE_RIDER","REJECT_RIDER","VIEW_ORDERS","EDIT_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS"],Support:["VIEW_DASHBOARD","VIEW_USERS","VIEW_VENDORS","VIEW_RIDERS","VIEW_ORDERS","EDIT_ORDER"],OperationsAdmin:["VIEW_DASHBOARD","VIEW_USERS","VIEW_VENDORS","VIEW_RIDERS","VIEW_ORDERS","EDIT_ORDER","CANCEL_ORDER","REFUND_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS","EXPORT_REPORTS","VIEW_SETTINGS","VIEW_AUDIT_LOGS","VIEW_PAYMENTS","MANAGE_PAYMENTS","FUND_WALLET","VIEW_WALLET_TRANSACTIONS","PROCESS_REFUNDS","VIEW_PAYMENT_ANALYTICS","VIEW_ADVERTISEMENTS","CREATE_ADVERTISEMENT","EDIT_ADVERTISEMENT","DELETE_ADVERTISEMENT","TOGGLE_ADVERTISEMENT","VIEW_FEATURE_REQUESTS","CREATE_FEATURE_REQUEST","MANAGE_FEATURE_REQUESTS","REVIEW_FEATURE_REQUESTS","VIEW_PROMOTIONS","CREATE_PROMOTION","EDIT_PROMOTION","DELETE_PROMOTION","TOGGLE_PROMOTION","BULK_MANAGE_PROMOTIONS"],RiderAdmin:["VIEW_DASHBOARD","VIEW_RIDERS","APPROVE_RIDER","REJECT_RIDER","SUSPEND_RIDER","EDIT_RIDER","DELETE_RIDER","TRACK_RIDER","VIEW_ORDERS","EDIT_ORDER","CANCEL_ORDER","ASSIGN_RIDER","VIEW_ANALYTICS","EXPORT_REPORTS"]}},51034:function(E,e,s){s.d(e,{Nv:function(){return _}});var R=s(83464),t=s(24294);let r=R.Z.create({baseURL:"http://localhost:8080",timeout:6e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(E=>{let e=t.e.getToken();return e&&(E.headers.Authorization="Bearer ".concat(e)),E.data instanceof FormData&&delete E.headers["Content-Type"],E},E=>(console.error("Request interceptor error:",E),Promise.reject(E))),r.interceptors.response.use(E=>E,async E=>{var e,s,R;let i=E.config;if((null===(e=E.response)||void 0===e?void 0:e.status)===401){if(!(null==i?void 0:i._retry)){i&&(i._retry=!0);try{if(await t.e.refreshToken()&&i){let E=t.e.getToken();if(E)return i.headers.Authorization="Bearer ".concat(E),r(i)}}catch(E){console.error("Token refresh failed:",E)}}t.e.logout();{let E=window.location.pathname;E.includes("/login")||(window.location.href="/login?redirect=".concat(encodeURIComponent(E)))}}return(null===(s=E.response)||void 0===s?void 0:s.status)===403&&console.error("Access forbidden - insufficient permissions"),(null===(R=E.response)||void 0===R?void 0:R.status)&&E.response.status>=500&&console.error("Server error - please try again later"),Promise.reject(E)}),e.ZP=r;let i=E=>{let{data:e}=E;if("success"in e){if(!e.success)throw Error(e.message||"API request failed");return e.data}if("isSuccess"in e){if(!e.isSuccess)throw Error(e.message||"API request failed");return e.data}if(e.statusCode<200||e.statusCode>=300)throw Error(e.message||"API request failed");let s=e.data;return s&&"object"==typeof s&&"items"in s?{items:s.items,pageNumber:s.pageNumber,pageSize:s.pageSize,totalCount:s.totalCount}:s},_=async E=>{try{let e=await E();return i(e)}catch(E){if(R.Z.isAxiosError(E)){var e,s;throw Error((null===(s=E.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||E.message)}throw E}}},24294:function(E,e,s){s.d(e,{e:function(){return i}});var R=s(19157),t=s(8226),r=s(51034);class i{static async login(E,e){try{let s=(await r.ZP.post("/api/account/auth/admin-signin",{email:E,password:e})).data.data;if(console.log("Login response:",s),!s.accessToken||!s.user)throw Error("Invalid login response - missing required data");return this.setToken(s.accessToken),this.setRefreshToken(s.refreshToken||""),this.setTokenExpiry(s.expiration||""),this.setUser(s.user),R.$.setUserPermissions({role:s.user.roles[0],permissions:s.user.permissions}),s}catch(E){throw console.error("Login error:",E),E}}static logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.TOKEN_EXPIRY_KEY),R.$.clearPermissions()}static getToken(){return localStorage.getItem(this.TOKEN_KEY)}static setToken(E){localStorage.setItem(this.TOKEN_KEY,E)}static getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}static setRefreshToken(E){localStorage.setItem(this.REFRESH_TOKEN_KEY,E)}static getTokenExpiry(){return localStorage.getItem(this.TOKEN_EXPIRY_KEY)}static setTokenExpiry(E){localStorage.setItem(this.TOKEN_EXPIRY_KEY,E)}static isTokenExpired(){let E=this.getTokenExpiry();return!E||new Date(E)<=new Date}static getUser(){{let E=localStorage.getItem(this.USER_KEY);return E?JSON.parse(E):null}}static setUser(E){localStorage.setItem(this.USER_KEY,JSON.stringify(E))}static isAuthenticated(){return!!this.getToken()}static async refreshToken(){let E=this.getRefreshToken();if(!E)return!1;try{let e=(await r.ZP.post("/api/auth/refresh",{refreshToken:E})).data.data;if(e.accessToken)return this.setToken(e.accessToken),this.setRefreshToken(e.refreshToken||""),this.setTokenExpiry(e.expiration||""),!0;return!1}catch(E){return console.error("Token refresh failed:",E),this.logout(),!1}}static async validateToken(){if(!this.getToken())return!1;try{return(await r.ZP.post("/api/auth/validate")).data.data.valid}catch(E){return console.error("Token validation failed:",E),!1}}static async initializeAuth(){let E=this.getToken(),e=this.getUser();return E&&e?(R.$.setUserPermissions({role:e.roles[0],permissions:e.permissions}),e):null}static hasAdminAccess(){let E=this.getUser();return!!E&&E.roles.some(E=>[t.uU.SUPER_ADMIN,t.uU.OPERATIONS_ADMIN,t.uU.RIDER_ADMIN,t.uU.ADMIN,t.uU.MODERATOR].includes(E))}}i.TOKEN_KEY="authToken",i.REFRESH_TOKEN_KEY="refreshToken",i.USER_KEY="authUser",i.TOKEN_EXPIRY_KEY="tokenExpiry"},19157:function(E,e,s){s.d(e,{$:function(){return t}});var R=s(8226);class t{static setUserPermissions(E){this.userPermissions=E}static getUserPermissions(){return this.userPermissions}static hasPermission(E){return this.userPermissions?this.userPermissions.permissions.includes(E):E===R.y3.VIEW_ADVERTISEMENTS}static hasRole(E){return!!this.userPermissions&&this.userPermissions.role===E}static hasAnyRole(E){return!!this.userPermissions&&E.includes(this.userPermissions.role)}static hasAnyPermission(E){return!!this.userPermissions&&E.some(E=>this.userPermissions.permissions.includes(E))}static canAccess(E){return!!this.userPermissions&&(Array.isArray(E)?E:[E]).every(E=>this.userPermissions.permissions.includes(E))}static getPermissionsForRole(E){return R.MN[E]||[]}static isAdmin(){return this.hasAnyRole([R.uU.SUPER_ADMIN,R.uU.ADMIN])}static isSuperAdmin(){return this.hasRole(R.uU.SUPER_ADMIN)}static canManageUsers(){return this.hasAnyPermission([R.y3.CREATE_USER,R.y3.EDIT_USER,R.y3.DELETE_USER,R.y3.SUSPEND_USER])}static canManageVendors(){return this.hasAnyPermission([R.y3.APPROVE_VENDOR,R.y3.REJECT_VENDOR,R.y3.SUSPEND_VENDOR,R.y3.EDIT_VENDOR,R.y3.DELETE_VENDOR])}static canManageRiders(){return this.hasAnyPermission([R.y3.APPROVE_RIDER,R.y3.REJECT_RIDER,R.y3.SUSPEND_RIDER,R.y3.EDIT_RIDER,R.y3.DELETE_RIDER])}static canManageOrders(){return this.hasAnyPermission([R.y3.EDIT_ORDER,R.y3.CANCEL_ORDER,R.y3.REFUND_ORDER,R.y3.ASSIGN_RIDER])}static clearPermissions(){this.userPermissions=null}}t.userPermissions=null}}]);