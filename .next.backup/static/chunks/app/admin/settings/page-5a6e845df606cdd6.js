(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6140],{47358:function(e,t,r){Promise.resolve().then(r.bind(r,24028))},24028:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(57437),a=r(2265),n=r(15575),i=r(4670),d=r(96502),l=r(42548),o=r(40873);let c=[{value:"Admin",label:"Admin"},{value:"Moderator",label:"Moderator"},{value:"Support",label:"Support"},{value:"RiderAdmin",label:"Rider Admin"},{value:"OperationsAdmin",label:"Operations Admin"}];function m(){let[e,t]=(0,a.useState)({email:"",firstName:"",lastName:"",role:"Admin",generatePassword:!0,password:""}),[r,i]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),x=(0,o.W)(),p=async r=>{r.preventDefault();let s={email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,generatePassword:e.generatePassword,...e.generatePassword?{}:{password:e.password}};x.mutate(s,{onSuccess:r=>{console.log("Admin creation successful:",r);let s="".concat(r.firstName," ").concat(r.lastName);u(e.generatePassword?"".concat(s," created successfully as ").concat(r.roles[0],"! A temporary password has been sent to ").concat(r.email):"".concat(s," created successfully as ").concat(r.roles[0],"!")),t({email:"",firstName:"",lastName:"",role:"Admin",generatePassword:!0,password:""}),setTimeout(()=>u(null),8e3)},onError:e=>{console.error("Admin creation failed:",e)}})},h=e=>{let{name:r,value:s,type:a}=e.target;t(t=>({...t,[r]:"checkbox"===a?e.target.checked:s}))};return(0,s.jsxs)("div",{className:"bg-surface-0 rounded-card border border-border-default",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-border-default",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n.Z,{className:"h-6 w-6 text-primary-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-text-primary",children:"Add New Admin"}),(0,s.jsx)("p",{className:"text-sm text-text-secondary",children:"Create a new admin user with specified role and permissions."})]})]})}),(0,s.jsxs)("form",{onSubmit:p,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-text-primary mb-2",children:["First Name ",(0,s.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-default rounded-input focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-surface-50 text-text-primary",placeholder:"Enter first name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-text-primary mb-2",children:["Last Name ",(0,s.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-default rounded-input focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-surface-50 text-text-primary",placeholder:"Enter last name"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-text-primary mb-2",children:["Email Address ",(0,s.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-default rounded-input focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-surface-50 text-text-primary",placeholder:"Enter email address"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"role",className:"block text-sm font-medium text-text-primary mb-2",children:["Admin Role ",(0,s.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,s.jsx)("select",{id:"role",name:"role",value:e.role,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-default rounded-input focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-surface-50 text-text-primary",children:c.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"generatePassword",name:"generatePassword",checked:e.generatePassword,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-border-default rounded"}),(0,s.jsx)("label",{htmlFor:"generatePassword",className:"ml-2 block text-sm text-text-primary",children:"Generate temporary password (recommended)"})]}),!e.generatePassword&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-text-primary mb-2",children:["Password ",(0,s.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:r?"text":"password",id:"password",name:"password",value:e.password,onChange:h,required:!e.generatePassword,className:"w-full px-3 py-2 pr-10 border border-border-default rounded-input focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-surface-50 text-text-primary",placeholder:"Enter password"}),(0,s.jsx)("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary",children:r?(0,s.jsx)(d.Z,{className:"h-5 w-5"}):(0,s.jsx)(l.Z,{className:"h-5 w-5"})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-border-default",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{t({email:"",firstName:"",lastName:"",role:"Admin",generatePassword:!0,password:""})},className:"px-4 py-2 border border-border-default rounded-lg hover:bg-surface-100 transition-colors focus:ring-2 focus:ring-primary-500 text-text-secondary",children:"Clear"}),(0,s.jsx)("button",{type:"submit",disabled:x.isPending,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-300 text-white rounded-lg transition-colors focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:x.isPending?"Creating Admin...":"Create Admin"})]})]}),m&&(0,s.jsx)("div",{className:"mx-6 mb-6 p-4 bg-success-50 border border-success-200 text-success-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm font-medium",children:m})}),x.isError&&(0,s.jsx)("div",{className:"mx-6 mb-6 p-4 bg-danger-50 border border-danger-200 text-danger-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm font-medium",children:"Failed to create admin. Please check the information and try again."})})]})}var u=r(76737),x=r(8226);let p=[{id:"admin-management",name:"Admin Management",icon:n.Z},{id:"system-settings",name:"System Settings",icon:i.Z}];function h(){let[e,t]=(0,a.useState)("admin-management");return(0,s.jsx)(u.Z,{permission:x.y3.VIEW_SETTINGS,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-border-default pb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-text-primary",children:"Settings"}),(0,s.jsx)("p",{className:"text-text-secondary mt-1",children:"Manage system settings and administrative functions."})]}),(0,s.jsx)("div",{className:"border-b border-border-default",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:p.map(r=>{let a=r.icon;return(0,s.jsxs)("button",{onClick:()=>t(r.id),className:"\n                  flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm\n                  ".concat(e===r.id?"border-primary-500 text-primary-600":"border-transparent text-text-secondary hover:text-text-primary hover:border-border-default","\n                "),children:[(0,s.jsx)(a,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:r.name})]},r.id)})})}),(0,s.jsxs)("div",{className:"py-6",children:["admin-management"===e&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(m,{})}),"system-settings"===e&&(0,s.jsxs)("div",{className:"bg-surface-50 rounded-card p-8 text-center",children:[(0,s.jsx)(i.Z,{className:"h-12 w-12 text-text-tertiary mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"System Settings"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"System configuration options will be available here."})]})]})]})})}},76737:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(57437),a=r(2265),n=r(99376),i=r(19157);function d(e){let{children:t,permission:r,fallback:d=null,redirectTo:l="/unauthorized"}=e,[o,c]=(0,a.useState)(null),m=(0,n.useRouter)();return((0,a.useEffect)(()=>{(()=>{let e=i.$.hasPermission(r);c(e),!e&&l&&m.push(l)})()},[r,l,m]),null===o)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o?(0,s.jsx)(s.Fragment,{children:t}):d?(0,s.jsx)(s.Fragment,{children:d}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-text-secondary mb-6",children:"You don't have permission to access this page."}),(0,s.jsx)("button",{onClick:()=>m.back(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Go Back"})]})})}},88013:function(e,t,r){"use strict";r.d(t,{R:function(){return a}});var s=r(51034);class a{async get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,s.Nv)(()=>s.ZP.get("".concat(this.endpoint).concat(e)))}async post(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,s.Nv)(()=>s.ZP.post("".concat(this.endpoint).concat(e),t))}async put(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,s.Nv)(()=>s.ZP.put("".concat(this.endpoint).concat(e),t))}async patch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,s.Nv)(()=>s.ZP.patch("".concat(this.endpoint).concat(e),t))}async deleteRequest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,s.Nv)(()=>s.ZP.delete("".concat(this.endpoint).concat(e)))}async getAll(e){let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,s]=e;null!=s&&t.append(r,s.toString())});let r=t.toString()?"?".concat(t):"";return this.get(r)}async getById(e){return this.get("/".concat(e))}async create(e){return this.post("",e)}async update(e,t){return this.put("/".concat(e),t)}async delete(e){return this.deleteRequest("/".concat(e))}async bulkAction(e,t,r){return this.post("/bulk-action",{action:e,ids:t,data:r})}constructor(e){this.endpoint=e}}},40873:function(e,t,r){"use strict";r.d(t,{W:function(){return l},b:function(){return o}});var s=r(29827),a=r(21770),n=r(88013);class i extends n.R{async addAdmin(e){return this.post("/add-admin",e)}async changeAdminPassword(e){return this.post("/admin-change-password",e)}constructor(){super("/api/account/auth")}}let d=new i;function l(){let e=(0,s.NL)();return(0,a.D)({mutationFn:e=>d.addAdmin(e),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})},onError:e=>{console.error("Failed to add admin:",e)}})}function o(){return(0,a.D)({mutationFn:e=>d.changeAdminPassword(e),onError:e=>{console.error("Failed to change password:",e)}})}}},function(e){e.O(0,[3464,9984,73,2971,2117,1744],function(){return e(e.s=47358)}),_N_E=e.O()}]);