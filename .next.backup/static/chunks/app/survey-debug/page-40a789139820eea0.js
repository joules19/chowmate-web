(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1986],{80636:function(e,t,s){Promise.resolve().then(s.bind(s,20825))},88013:function(e,t,s){"use strict";s.d(t,{R:function(){return i}});var r=s(51034);class i{async get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,r.Nv)(()=>r.ZP.get("".concat(this.endpoint).concat(e)))}async post(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,r.Nv)(()=>r.ZP.post("".concat(this.endpoint).concat(e),t))}async put(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,r.Nv)(()=>r.ZP.put("".concat(this.endpoint).concat(e),t))}async patch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,r.Nv)(()=>r.ZP.patch("".concat(this.endpoint).concat(e),t))}async deleteRequest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,r.Nv)(()=>r.ZP.delete("".concat(this.endpoint).concat(e)))}async getAll(e){let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,r.toString())});let s=t.toString()?"?".concat(t):"";return this.get(s)}async getById(e){return this.get("/".concat(e))}async create(e){return this.post("",e)}async update(e,t){return this.put("/".concat(e),t)}async delete(e){return this.deleteRequest("/".concat(e))}async bulkAction(e,t,s){return this.post("/bulk-action",{action:e,ids:t,data:s})}constructor(e){this.endpoint=e}}},68369:function(e,t,s){"use strict";s.d(t,{B:function(){return i},H:function(){return n}});var r=s(88013);let i={1:"ShortText",2:"LongText",3:"MultipleChoice",4:"MultipleSelect",5:"Rating",6:"YesNo",7:"Dropdown"};class n extends r.R{async getSurvey(e){try{let t=await this.get("/".concat(e));return{success:!0,data:t,message:"Survey retrieved successfully"}}catch(e){return console.error("Survey fetch error:",e),{success:!1,message:e.message||"Failed to fetch survey",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async getActiveSurveys(){try{let e=await this.get("/active");return{success:!0,data:e,message:"Active surveys retrieved successfully"}}catch(e){return console.error("Active surveys fetch error:",e),{success:!1,message:e.message||"Failed to fetch active surveys",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async submitSurveyResponse(e){try{let t=await this.post("/".concat(e.surveyId,"/submit"),e);return{success:!0,data:t,message:"Survey response submitted successfully"}}catch(e){return console.error("Survey submission error:",e),{success:!1,message:e.message||"Failed to submit survey response",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async canSubmitSurvey(e,t){try{let s=t?"?sessionId=".concat(encodeURIComponent(t)):"",r=await this.get("/".concat(e,"/can-submit").concat(s));return{success:!0,data:r,message:"Submission eligibility checked successfully"}}catch(e){return console.error("Can submit check error:",e),{success:!1,message:e.message||"Failed to check submission eligibility",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}constructor(){super("/api/common/survey")}}},93095:function(e,t,s){"use strict";s.d(t,{KP:function(){return o},Xc:function(){return c}});var r=s(11713),i=s(21770);let n=new(s(68369)).H,a={all:["surveys"],survey:e=>[...a.all,"survey",e],activeSurveys:()=>[...a.all,"active"],canSubmit:(e,t)=>[...a.all,"can-submit",e,t]},o=()=>(0,r.a)({queryKey:a.activeSurveys(),queryFn:()=>n.getActiveSurveys(),staleTime:12e4}),c=()=>(0,i.D)({mutationFn:e=>n.submitSurveyResponse(e),onSuccess:(e,t)=>{console.log("Survey response submitted successfully:",e)},onError:e=>{console.error("Error submitting survey response:",e)}})},20825:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var r=s(57437),i=s(2265),n=s(93095);function a(){let[e,t]=(0,i.useState)(null),{data:s,isLoading:a,error:o}=(0,n.KP)(),c=async()=>{try{let e="http://localhost:8080",s=await fetch("".concat(e,"/api/common/survey/active"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),r=await s.json();t({status:s.status,data:r,url:"".concat(e,"/api/common/survey/active")})}catch(e){t({error:e.message,url:"".concat("http://localhost:8080","/api/common/survey/active")})}},u=async e=>{try{let s="http://localhost:8080",r=await fetch("".concat(s,"/api/common/survey/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),i=await r.json();t({status:r.status,data:i,url:"".concat(s,"/api/common/survey/").concat(e),surveyId:e})}catch(s){t({error:s.message,url:"".concat("http://localhost:8080","/api/common/survey/").concat(e),surveyId:e})}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Survey API Debug Tool"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Test survey API endpoints and debug connection issues"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Environment Configuration"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"API Base URL:"})," ","http://localhost:8080"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Environment:"})," ","production"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"React Query - Active Surveys"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(a?"bg-yellow-100 text-yellow-800":o?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:a?"Loading...":o?"Error":"Success"})}),o&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,r.jsx)("p",{className:"text-red-800 font-medium",children:"Error:"}),(0,r.jsx)("pre",{className:"text-red-600 text-xs mt-2 overflow-auto",children:JSON.stringify(o,null,2)})]}),s&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:[(0,r.jsx)("p",{className:"text-green-800 font-medium",children:"Active Surveys Response:"}),(0,r.jsx)("pre",{className:"text-green-700 text-xs mt-2 overflow-auto max-h-64",children:JSON.stringify(s,null,2)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Direct API Test"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:c,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Test Active Surveys API"}),(0,r.jsx)("button",{onClick:()=>u("chowmate-feedback"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"Test chowmate-feedback"}),(0,r.jsx)("button",{onClick:()=>u("12345678-1234-5678-9012-123456789012"),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"Test GUID Survey"})]}),e&&(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded p-4",children:[(0,r.jsx)("p",{className:"font-medium mb-2",children:"API Test Result:"}),(0,r.jsx)("pre",{className:"text-xs overflow-auto max-h-96 bg-white p-3 rounded border",children:JSON.stringify(e,null,2)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Backend Requirements Checklist"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border-2 border-gray-300"}),(0,r.jsx)("span",{children:"Survey seeder has been run (check database for surveys)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border-2 border-gray-300"}),(0,r.jsx)("span",{children:"Survey controller is registered and accessible"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border-2 border-gray-300"}),(0,r.jsx)("span",{children:"CORS is configured for your frontend domain"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border-2 border-gray-300"}),(0,r.jsx)("span",{children:"Database connection is working"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border-2 border-gray-300"}),(0,r.jsx)("span",{children:"Survey service dependencies are injected correctly"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("a",{href:"/survey-test",className:"block p-4 bg-yellow-100 border border-yellow-300 rounded hover:bg-yellow-200 transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium text-yellow-900",children:"Survey Test Page"}),(0,r.jsx)("p",{className:"text-yellow-700 text-sm",children:"Test the complete survey experience"})]}),(0,r.jsxs)("a",{href:"/survey/chowmate-feedback",className:"block p-4 bg-blue-100 border border-blue-300 rounded hover:bg-blue-200 transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-900",children:"Mock Survey"}),(0,r.jsx)("p",{className:"text-blue-700 text-sm",children:"Try with fallback mock data"})]})]})]})]})})}},2894:function(e,t,s){"use strict";s.d(t,{R:function(){return o},m:function(){return a}});var r=s(18238),i=s(7989),n=s(11255),a=class extends i.F{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#r({type:"continue"})};this.#s=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#r({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,r=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#r({type:"pending",context:t,variables:e,isPaused:r})}let i=await this.#s.start();return await this.#t.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#r({type:"success",data:i}),i}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#r({type:"error",error:t})}}finally{this.#t.runNext(this)}}#r(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),r.Vr.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},21770:function(e,t,s){"use strict";s.d(t,{D:function(){return l}});var r=s(2265),i=s(2894),n=s(18238),a=s(24112),o=s(45345),c=class extends a.l{#i;#n=void 0;#a;#o;constructor(e,t){super(),this.#i=e,this.setOptions(t),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#i.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#i.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(e){this.#c(),this.#u(e)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#c(),this.#u()}mutate(e,t){return this.#o=t,this.#a?.removeObserver(this),this.#a=this.#i.getMutationCache().build(this.#i,this.options),this.#a.addObserver(this),this.#a.execute(e)}#c(){let e=this.#a?.state??(0,i.R)();this.#n={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#u(e){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#n.variables,s=this.#n.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,s),this.#o.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#o.onError?.(e.error,t,s),this.#o.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#n)})})}},u=s(29827);function l(e,t){let s=(0,u.NL)(t),[i]=r.useState(()=>new c(s,e));r.useEffect(()=>{i.setOptions(e)},[i,e]);let a=r.useSyncExternalStore(r.useCallback(e=>i.subscribe(n.Vr.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=r.useCallback((e,t)=>{i.mutate(e,t).catch(o.ZT)},[i]);if(a.error&&(0,o.L3)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}}},function(e){e.O(0,[3464,9763,1713,73,2971,2117,1744],function(){return e(e.s=80636)}),_N_E=e.O()}]);