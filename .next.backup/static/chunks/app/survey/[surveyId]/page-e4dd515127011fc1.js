(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7130],{67242:function(e,t,s){Promise.resolve().then(s.bind(s,19058))},81177:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(57437),r=s(61994),i=s(28026);function n(e){let{title:t="Loading...",description:s,size:n="md",className:o,showBackground:l=!0}=e;return(0,a.jsx)("div",{className:(0,r.W)("flex flex-col items-center justify-center text-center",l&&"bg-surface-0 rounded-card shadow-soft border border-border-light",{sm:"py-4",md:"py-8",lg:"py-12"}[n],o),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)(i.Z,{size:{sm:"md",md:"lg",lg:"xl"}[n],color:"primary",className:"mx-auto mb-4"}),(0,a.jsx)("div",{className:(0,r.W)("font-medium text-text-primary mb-2",{sm:"text-sm",md:"text-base",lg:"text-lg"}[n]),children:t}),s&&(0,a.jsx)("div",{className:"text-sm text-text-secondary max-w-xs",children:s})]})})}},28026:function(e,t,s){"use strict";s.d(t,{$:function(){return i}});var a=s(57437),r=s(61994);let i=e=>{let{size:t="md",color:s="primary",className:i}=e;return(0,a.jsx)("div",{className:(0,r.W)("animate-spin rounded-full border-2 border-solid border-r-transparent",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"}[t],{primary:"border-primary-500",white:"border-white",gray:"border-gray-500",success:"border-success-500",danger:"border-danger-500",warning:"border-warning-500"}[s],i),role:"status","aria-label":"Loading",children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})};t.Z=i},88013:function(e,t,s){"use strict";s.d(t,{R:function(){return r}});var a=s(51034);class r{async get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,a.Nv)(()=>a.ZP.get("".concat(this.endpoint).concat(e)))}async post(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,a.Nv)(()=>a.ZP.post("".concat(this.endpoint).concat(e),t))}async put(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,a.Nv)(()=>a.ZP.put("".concat(this.endpoint).concat(e),t))}async patch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,a.Nv)(()=>a.ZP.patch("".concat(this.endpoint).concat(e),t))}async deleteRequest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,a.Nv)(()=>a.ZP.delete("".concat(this.endpoint).concat(e)))}async getAll(e){let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,a]=e;null!=a&&t.append(s,a.toString())});let s=t.toString()?"?".concat(t):"";return this.get(s)}async getById(e){return this.get("/".concat(e))}async create(e){return this.post("",e)}async update(e,t){return this.put("/".concat(e),t)}async delete(e){return this.deleteRequest("/".concat(e))}async bulkAction(e,t,s){return this.post("/bulk-action",{action:e,ids:t,data:s})}constructor(e){this.endpoint=e}}},68369:function(e,t,s){"use strict";s.d(t,{B:function(){return r},H:function(){return i}});var a=s(88013);let r={1:"ShortText",2:"LongText",3:"MultipleChoice",4:"MultipleSelect",5:"Rating",6:"YesNo",7:"Dropdown"};class i extends a.R{async getSurvey(e){try{let t=await this.get("/".concat(e));return{success:!0,data:t,message:"Survey retrieved successfully"}}catch(e){return console.error("Survey fetch error:",e),{success:!1,message:e.message||"Failed to fetch survey",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async getActiveSurveys(){try{let e=await this.get("/active");return{success:!0,data:e,message:"Active surveys retrieved successfully"}}catch(e){return console.error("Active surveys fetch error:",e),{success:!1,message:e.message||"Failed to fetch active surveys",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async submitSurveyResponse(e){try{let t=await this.post("/".concat(e.surveyId,"/submit"),e);return{success:!0,data:t,message:"Survey response submitted successfully"}}catch(e){return console.error("Survey submission error:",e),{success:!1,message:e.message||"Failed to submit survey response",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}async canSubmitSurvey(e,t){try{let s=t?"?sessionId=".concat(encodeURIComponent(t)):"",a=await this.get("/".concat(e,"/can-submit").concat(s));return{success:!0,data:a,message:"Submission eligibility checked successfully"}}catch(e){return console.error("Can submit check error:",e),{success:!1,message:e.message||"Failed to check submission eligibility",errors:[e.message||"Unknown error"],statusCode:e.status||500}}}constructor(){super("/api/common/survey")}}},93095:function(e,t,s){"use strict";s.d(t,{KP:function(){return o},Xc:function(){return l}});var a=s(11713),r=s(21770);let i=new(s(68369)).H,n={all:["surveys"],survey:e=>[...n.all,"survey",e],activeSurveys:()=>[...n.all,"active"],canSubmit:(e,t)=>[...n.all,"can-submit",e,t]},o=()=>(0,a.a)({queryKey:n.activeSurveys(),queryFn:()=>i.getActiveSurveys(),staleTime:12e4}),l=()=>(0,r.D)({mutationFn:e=>i.submitSurveyResponse(e),onSuccess:(e,t)=>{console.log("Survey response submitted successfully:",e)},onError:e=>{console.error("Error submitting survey response:",e)}})},19058:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(57437),r=s(99376),i=s(2265),n=s(48614),o=s(9241),l=s(90173),c=s(81801),d=s(29812),u=s(83727),x=s(69390),m=s(68369);function y(e){var t,s;let{question:r,value:n,onChange:l,isSubmitting:c}=e,d="type"in r&&"number"==typeof r.type?function(e){var t,s;let a=m.B[e.type]||"ShortText";return{id:e.id,text:e.text,type:a,isRequired:e.isRequired,description:e.description||"",options:e.options||[],minRating:(null===(t=e.validationRules)||void 0===t?void 0:t.minRating)||1,maxRating:(null===(s=e.validationRules)||void 0===s?void 0:s.maxRating)||5,order:e.order,validationRules:e.validationRules}}(r):r,[y,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=setTimeout(()=>{v.current&&("ShortText"===d.type||"LongText"===d.type)&&v.current.focus()},500);return()=>clearTimeout(e)},[d.type]);let f=()=>(0,a.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,a.jsxs)(o.E.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-2xl sm:text-3xl font-bold text-gray-900 leading-tight",children:[d.text,d.isRequired&&(0,a.jsx)("span",{className:"text-red-500 ml-1","aria-label":"Required",children:"*"})]}),d.description&&(0,a.jsx)(o.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-gray-600 text-lg",children:d.description})]});switch(d.type){case"ShortText":default:return(0,a.jsxs)("div",{children:[f(),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative transition-all duration-300 ".concat(y?"transform scale-[1.02]":""),children:[(0,a.jsx)("input",{ref:v,type:"text",value:n||"",onChange:e=>l(e.target.value,e.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),className:"w-full px-6 py-4 text-lg border-2 border-yellow-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-colors bg-yellow-50 focus:bg-white placeholder-gray-400",placeholder:"Type your answer here...",disabled:c,"aria-describedby":d.description?"".concat(d.id,"-description"):void 0}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 h-0.5 bg-yellow-500 transition-all duration-300 ".concat(y?"w-full":"w-0")})]})]});case"LongText":return(0,a.jsxs)("div",{children:[f(),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative transition-all duration-300 ".concat(y?"transform scale-[1.02]":""),children:[(0,a.jsx)("textarea",{ref:v,value:n||"",onChange:e=>l(e.target.value,e.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),rows:4,className:"w-full px-6 py-4 text-lg border-2 border-yellow-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-colors bg-yellow-50 focus:bg-white placeholder-gray-400 resize-none",placeholder:"Share your thoughts...",disabled:c,"aria-describedby":d.description?"".concat(d.id,"-description"):void 0}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 h-0.5 bg-yellow-500 transition-all duration-300 ".concat(y?"w-full":"w-0")})]})]});case"MultipleChoice":return(0,a.jsxs)("div",{children:[f(),(0,a.jsx)("div",{className:"space-y-3",children:null===(t=d.options)||void 0===t?void 0:t.map((e,t)=>(0,a.jsxs)(o.E.label,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3+.1*t},className:"group relative flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ".concat(n===e?"border-yellow-500 bg-yellow-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"),children:[(0,a.jsx)("input",{type:"radio",name:d.id,value:e,checked:n===e,onChange:e=>l(e.target.value,e.target.value),className:"sr-only",disabled:c}),(0,a.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full border-2 mr-4 transition-all ".concat(n===e?"border-yellow-500 bg-yellow-500 shadow-sm":"border-gray-300 group-hover:border-gray-400"),children:n===e&&(0,a.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},className:"w-full h-full rounded-full bg-white scale-50"})}),(0,a.jsx)("span",{className:"text-lg font-medium transition-colors ".concat(n===e?"text-yellow-900":"text-gray-700 group-hover:text-gray-900"),children:e}),n===e&&(0,a.jsx)(o.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute right-4 text-yellow-500",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},e))})]});case"MultipleSelect":return(()=>{var e;let t=Array.isArray(n)?n:[],s=(e,s)=>{let a;l(a=s?[...t,e]:t.filter(t=>t!==e),a.join(", "))};return(0,a.jsxs)("div",{children:[f(),(0,a.jsx)("div",{className:"space-y-3",children:null===(e=d.options)||void 0===e?void 0:e.map((e,r)=>{let i=t.includes(e);return(0,a.jsxs)(o.E.label,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3+.1*r},className:"group relative flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ".concat(i?"border-orange-500 bg-orange-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"),children:[(0,a.jsx)("input",{type:"checkbox",value:e,checked:i,onChange:t=>s(e,t.target.checked),className:"sr-only",disabled:c}),(0,a.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded border-2 mr-4 flex items-center justify-center transition-all ".concat(i?"border-orange-500 bg-orange-500 shadow-sm":"border-gray-300 group-hover:border-gray-400"),children:i&&(0,a.jsx)(o.E.svg,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"text-lg font-medium transition-colors ".concat(i?"text-orange-900":"text-gray-700 group-hover:text-gray-900"),children:e})]},e)})}),t.length>0&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-green-800 font-medium",children:[t.length," option",t.length>1?"s":""," selected"]})})]})})();case"Rating":return(()=>{let e=d.minRating||1,t=d.maxRating||5,s=null!==p?p:"number"==typeof n?n:0;return(0,a.jsxs)("div",{children:[f(),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"flex space-x-2",children:Array.from({length:t-e+1},(r,i)=>{let n=e+i,d=n<=s;return(0,a.jsx)("button",{onClick:()=>l(n,n.toString()),onMouseEnter:()=>g(n),onMouseLeave:()=>g(null),className:"focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 rounded transition-all duration-150 transform hover:scale-110",disabled:c,"aria-label":"Rate ".concat(n," out of ").concat(t),children:(0,a.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3+.1*i},children:d?(0,a.jsx)(u.Z,{className:"w-12 h-12 text-yellow-400 drop-shadow-sm"}):(0,a.jsx)(x.Z,{className:"w-12 h-12 text-gray-300 hover:text-yellow-300 transition-colors"})})},n)})}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[s>0&&(0,a.jsxs)(o.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-2xl font-bold text-gray-900",children:[s," out of ",t]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 w-full max-w-xs",children:[(0,a.jsx)("span",{children:"Poor"}),(0,a.jsx)("span",{children:"Excellent"})]})]})]})]})})();case"YesNo":return(0,a.jsxs)("div",{children:[f(),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:["Yes","No"].map((e,t)=>(0,a.jsxs)(o.E.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3+.1*t},onClick:()=>l(e,e),className:"flex-1 py-6 px-8 rounded-2xl border-2 font-semibold text-xl transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 ".concat(n===e?"border-yellow-500 bg-yellow-500 text-white shadow-lg":"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:shadow-md"),disabled:c,children:[e,n===e&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-2",children:(0,a.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},e))})]});case"Dropdown":return(0,a.jsxs)("div",{children:[f(),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative transition-all duration-300 ".concat(y?"transform scale-[1.02]":""),children:[(0,a.jsxs)("select",{value:n||"",onChange:e=>l(e.target.value,e.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),className:"w-full px-6 py-4 text-lg border-2 border-yellow-200 rounded-xl focus:border-yellow-500 focus:outline-none transition-colors bg-yellow-50 focus:bg-white appearance-none cursor-pointer",disabled:c,"aria-describedby":d.description?"".concat(d.id,"-description"):void 0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Choose an option..."}),null===(s=d.options)||void 0===s?void 0:s.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 h-0.5 bg-yellow-500 transition-all duration-300 ".concat(y?"w-full":"w-0")})]})]})}}function h(e){let{progress:t,currentStep:s,totalSteps:r}=e;return(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-yellow-100 shadow-sm",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-1 bg-yellow-100",children:(0,a.jsx)(o.E.div,{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-400 shadow-sm",initial:{width:0},animate:{width:"".concat(t,"%")},transition:{duration:.5,ease:"easeOut"}})}),(0,a.jsx)("div",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Question ",s>r?r:s," of ",r]})]}),(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[t,"% complete"]})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:r},(e,t)=>{let r=t+1,i=r===s,n=r<s;return(0,a.jsx)(o.E.div,{initial:{scale:.8,opacity:.5},animate:{scale:i?1.2:1,opacity:i?1:n?.8:.3},transition:{duration:.2},className:"w-2 h-2 rounded-full ".concat(i?"bg-yellow-500 shadow-lg":n?"bg-green-500":"bg-gray-300")},t)})})]})})]})})}var p=s(58507),g=s(20322),v=s(33145);function f(e){let{survey:t,onStart:s}=e,r=Math.ceil(.25*t.questions.length);return(0,a.jsxs)("div",{className:"text-center space-y-8",children:[(0,a.jsx)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex justify-center mb-8",children:(0,a.jsx)("div",{className:"relative w-20 h-20 rounded-2xl bg-gradient-to-br from-yellow-100 to-yellow-50 flex items-center justify-center shadow-xl",children:(0,a.jsx)(v.default,{src:"/assets/images/icon/icon.png",alt:"Chowmate",width:70,height:70,className:"rounded-lg"})})}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight max-w-4xl mx-auto",children:t.title}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:t.description})]}),t.incentiveDescription&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"inline-flex items-center space-x-3 px-6 py-4 bg-gradient-to-r from-green-50 to-yellow-50 border border-green-200 rounded-2xl",children:[(0,a.jsx)(p.Z,{className:"w-6 h-6 text-green-600"}),(0,a.jsx)("span",{className:"text-green-800 font-semibold text-lg",children:t.incentiveDescription})]}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[r," minutes"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"To complete"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"flex justify-center mb-2",children:(0,a.jsx)("div",{className:"text-yellow-500 text-xl font-bold",children:t.questions.length})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Questions"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"One at a time"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)(x.Z,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Anonymous"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"No sign-up required"})]})]}),(0,a.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"text-center text-sm text-gray-500 max-w-md mx-auto space-y-2",children:(0,a.jsx)("p",{children:"\uD83D\uDD12 Your responses are confidential and will help us improve Chowmate's service."})}),(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"pt-4",children:(0,a.jsxs)("button",{onClick:s,className:"group inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-semibold text-lg rounded-2xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2",children:[(0,a.jsx)("span",{children:"Start Survey"}),(0,a.jsx)(o.E.svg,{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{x:0},animate:{x:[0,4,0]},transition:{repeat:1/0,duration:2},children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})}var b=s(21450),w=s(16248),j=s(33412),N=s(58894),E=s(71080),S=s(79235);function k(e){let{survey:t}=e,[s,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{(0,S.Z)({particleCount:100,spread:70,origin:{y:.6},colors:["#3B82F6","#8B5CF6","#10B981","#F59E0B"]})},500);return()=>clearTimeout(e)},[]),(0,a.jsxs)("div",{className:"text-center space-y-8 max-w-2xl mx-auto",children:[(0,a.jsx)(o.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:10,delay:.2},className:"relative flex justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 w-24 h-24 bg-green-400 rounded-full blur-xl opacity-30 animate-pulse"}),(0,a.jsx)(b.Z,{className:"relative w-24 h-24 text-green-500 drop-shadow-lg"}),(0,a.jsx)(o.E.div,{animate:{rotate:[0,360],scale:[1,1.2,1]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute -top-2 -right-2",children:(0,a.jsx)(w.Z,{className:"w-8 h-8 text-yellow-400"})}),(0,a.jsx)(o.E.div,{animate:{rotate:[360,0],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"linear"},className:"absolute -bottom-1 -left-2",children:(0,a.jsx)(w.Z,{className:"w-6 h-6 text-blue-400"})})]})}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900",children:"Thank You! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 leading-relaxed max-w-lg mx-auto",children:"Your feedback is invaluable and will help us make Chowmate even better for everyone."})]}),t.incentiveDescription&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,delay:.6},className:"bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 rounded-2xl p-6 space-y-4 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(j.Z,{className:"w-8 h-8 text-green-600"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-green-800",children:"Your Reward"})]}),(0,a.jsx)("p",{className:"text-lg text-green-700 font-semibold",children:t.incentiveDescription}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"* Check your email for more information. Valid for 30 days from today!"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"P.S: For registered users only"})]}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.questions.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Questions Answered"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(N.Z,{className:"w-6 h-6 text-red-500"})}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Made with Love"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"100%"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Complete"})]})]}),(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"flex flex-col sm:flex-row gap-4 justify-center",children:(0,a.jsxs)("button",{onClick:()=>{let e="I just completed a survey for Chowmate and got free delivery! \uD83C\uDF89 Help them improve their service: ".concat(window.location.href);navigator.share?navigator.share({title:"Chowmate Survey",text:e,url:window.location.href}):navigator.clipboard&&(navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3))},className:"group flex items-center justify-center space-x-3 px-6 py-4 bg-white text-gray-700 font-medium border-2 border-gray-200 rounded-2xl hover:border-gray-300 hover:shadow-md transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:[(0,a.jsx)(E.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:s?"Copied!":"Share Survey"})]})}),(0,a.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1.2},className:"text-center space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Have more feedback? Email us at",(0,a.jsx)("a",{href:"mailto:feedback@chowmate.app",className:"text-yellow-600 hover:underline ml-1",children:"support@chowmate.app"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Your responses help hundreds of food lovers get better service every day \uD83D\uDC99"})]})]})}var R=s(93095);function C(e){var t;let{survey:s}=e,[r,u]=(0,i.useState)(-1),[x,m]=(0,i.useState)({}),[p]=(0,i.useState)(()=>"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),g=(0,i.useRef)(null),v=(0,R.Xc)(),b=[...s.questions].sort((e,t)=>e.order-t.order),w=b.length,j=-1===r,N=r>=w,E=r>=0&&r<w?b[r]:null;(0,i.useEffect)(()=>{if(E&&x[E.id]&&(x[E.id],3===E.type||6===E.type)){let e=setTimeout(()=>{D()},800);return()=>clearTimeout(e)}},[x,null==E?void 0:E.id]),(0,i.useEffect)(()=>{g.current&&g.current.scrollTo({top:0,behavior:"smooth"})},[r]),(0,i.useEffect)(()=>{let e=e=>{"Enter"!==e.key||e.shiftKey?"ArrowUp"===e.key&&e.altKey?(e.preventDefault(),q()):"ArrowDown"===e.key&&e.altKey&&(e.preventDefault(),C()&&D()):(e.preventDefault(),C()&&D())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,x]);let S=(e,t,s)=>{m(a=>({...a,[e]:{questionId:e,value:t,text:s}}))},C=()=>{if(j)return!0;if(!E)return!1;let e=x[E.id];return!(E.isRequired&&!e||E.isRequired&&(null==e?void 0:e.value)===""||E.isRequired&&Array.isArray(null==e?void 0:e.value)&&0===e.value.length)},D=()=>{N||(j?u(0):r<w-1?u(e=>e+1):A())},q=()=>{j||(0===r?u(-1):u(e=>e-1))},A=async()=>{try{let e={surveyId:s.id,sessionId:p,answers:Object.values(x).map(e=>({questionId:e.questionId,answerText:e.text||("string"==typeof e.value?e.value:""),selectedOptions:Array.isArray(e.value)?e.value:[],numericValue:"number"==typeof e.value?e.value:void 0}))},t=await v.mutateAsync(e);t.success?(console.log("Survey submitted successfully:",t.data),u(w)):(console.error("Survey submission failed:",t.message),alert("Failed to submit survey: "+t.message))}catch(e){console.error("Error submitting survey:",e),alert("An error occurred while submitting the survey. Please try again.")}},T=v.isPending;return(0,a.jsxs)("div",{ref:g,className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 overflow-auto",style:{fontFamily:"Montserrat, sans-serif"},children:[!j&&(0,a.jsx)(h,{progress:j?0:N?100:Math.round((r+1)/w*100),currentStep:Math.max(0,r+1),totalSteps:w}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen px-4 py-8",style:{paddingTop:j?"32px":"80px"},children:(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto",children:(0,a.jsxs)(n.M,{mode:"wait",children:[j&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:(0,a.jsx)(f,{survey:s,onStart:()=>D()})},"welcome"),N&&(0,a.jsx)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},children:(0,a.jsx)(k,{survey:s})},"complete"),E&&!N&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.4,ease:"easeOut"},className:"space-y-8",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[r+1," of ",w]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:(0,a.jsx)("div",{className:"p-8 sm:p-12",children:(0,a.jsx)(y,{question:E,value:null===(t=x[E.id])||void 0===t?void 0:t.value,onChange:(e,t)=>S(E.id,e,t),isSubmitting:T})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("button",{onClick:q,className:"group flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 rounded-lg","aria-label":"Previous question",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 group-hover:-translate-y-0.5 transition-transform"}),(0,a.jsx)("span",{className:"font-medium",children:"Previous"})]}),(0,a.jsxs)("button",{onClick:D,disabled:!C()||T,className:"group flex items-center space-x-2 px-6 py-3 rounded-lg font-semibold transition-all transform focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 ".concat(C()&&!T?"bg-yellow-500 text-white hover:bg-yellow-600 hover:scale-105 shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),"aria-label":r===w-1?"Submit survey":"Next question",children:[(0,a.jsx)("span",{children:T?"Submitting...":r===w-1?"Submit":"Next"}),!T&&(r===w-1?(0,a.jsx)(c.Z,{className:"w-5 h-5 group-hover:translate-y-0.5 transition-transform"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 group-hover:translate-x-0.5 transition-transform"})),T&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})]})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-400 space-y-1",children:[(0,a.jsxs)("p",{children:["Press ",(0,a.jsx)("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Enter"})," to continue"]}),(0,a.jsxs)("p",{children:["Press ",(0,a.jsx)("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Alt + ↑"})," to go back"]})]})]},"question-".concat(E.id))]})})})]})}var D=s(81177);function q(){let e=(0,r.useParams)(),t=(0,r.useRouter)(),s=e.surveyId,{data:i,isLoading:n,error:o}=(0,R.KP)(),l=(null==i?void 0:i.success)&&i.data?i.data:[],c=l.find(e=>e.id===s)||l[0]||("chowmate-feedback"===s?{id:"chowmate-feedback",title:"What's keeping you from placing your first (or next) order on Chowmate?",description:"Take 2 minutes to answer • Get free delivery on your next order just for answering",incentiveDescription:"Get free delivery on your first order just for answering",status:"Active",allowMultipleSubmissions:!1,requireAuthentication:!1,createdAt:new Date().toISOString(),questions:[{id:"1",text:"How often do you usually order food online?",type:3,isRequired:!0,description:"",options:["Daily","A few times a week","Once in a while","Rarely"],validationRules:null,order:1},{id:"2",text:"Have you used Chowmate to order food?",type:3,isRequired:!0,description:"",options:["Yes","Not yet"],validationRules:null,order:2},{id:"3",text:"Any suggestions that would make Chowmate your go-to food app?",type:2,isRequired:!0,description:"",options:[],validationRules:null,order:3},{id:"4",text:"Enter your email to receive your free delivery reward",type:1,isRequired:!0,description:"We'll send your free delivery instructions to this email. Use the email you registered with!",options:[],validationRules:null,order:4}]}:null),d=o||!(null==i?void 0:i.success)&&(null==i?void 0:i.message)&&"chowmate-feedback"!==s;return(console.log("Survey ID:",s),console.log("Active Surveys Response:",i),console.log("Active Surveys:",l),console.log("Selected Survey:",c),console.log("API Error:",d),n)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 flex items-center justify-center",children:(0,a.jsx)(D.Z,{})}):d||!c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl",children:"\uD83D\uDE14"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Survey Not Found"}),(0,a.jsx)("p",{className:"text-gray-600",children:d instanceof Error?d.message:d||"The survey you're looking for doesn't exist."}),(0,a.jsx)("button",{onClick:()=>t.push("/"),className:"px-6 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Go Home"})]})}):(0,a.jsx)(C,{survey:c})}}},function(e){e.O(0,[3464,9763,1713,3145,9241,1336,73,2971,2117,1744],function(){return e(e.s=67242)}),_N_E=e.O()}]);